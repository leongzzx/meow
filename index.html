<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>LoL Champions Selector</title>
<style>
  body {
    font-family: Arial, sans-serif;
    text-align: center;
    margin: 0;
    padding: 20px;
    background: url('champselect.jpg') no-repeat center center fixed;
    background-size: cover;
    color: white; /* optional, better contrast */
  }

  #champion-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
    gap: 25px; /* bigger gap to avoid border overlap */
    max-width: 1000px;
    margin: 20px auto;
  }
  .champion {
    border: 2px solid transparent;
    border-radius: 10px;
    cursor: pointer;
    transition: 0.2s;
    filter: grayscale(70%) brightness(0.8);
    opacity: 0.6;
    width: 100px;
    height: 100px;
    object-fit: contain;
  }
  .champion.selected {
    filter: none;
    opacity: 1;
    border-color: purple;
    box-shadow: 0 0 10px pink;
  }
  #controls {
    margin-bottom: 15px;
  }
  button {
    margin: 0 5px 10px 5px;
    padding: 6px 12px;
    font-size: 14px;
    cursor: pointer;
  }
  #random-output {
    margin-top: 10px;
    font-weight: bold;
    min-height: 24px;
  }
  #random-image {
    display: none;
    max-width: 150px;
    border-radius: 10px;
    margin: 10px auto 0 auto; /* top margin and center horizontally */
    display: block;
  }
</style>
</head>
<body>

<div id="controls">
  <input type="text" id="search" placeholder="Search champions..." />
  <br />
  <button id="select-all-btn">Select All</button>
  <button id="deselect-all-btn">Deselect All</button>
  <button id="random-btn">Pick a Random Champion</button>
</div>

<div id="random-output">
  <div id="random-text"></div>
  <img id="random-image" alt="" />
</div>
<div id="champion-grid"></div>

<script>
  const patch = "15.15.1"; // use latest patch here
  const championGrid = document.getElementById("champion-grid");
  const searchInput = document.getElementById("search");
  const randomBtn = document.getElementById("random-btn");
  const randomText = document.getElementById("random-text");
  const randomImage = document.getElementById("random-image");
  const selectAllBtn = document.getElementById("select-all-btn");
  const deselectAllBtn = document.getElementById("deselect-all-btn");

  let selectedChamps = JSON.parse(localStorage.getItem("selectedChamps")) || [];
  let championElements = []; // will hold { id, element } for all champions

  // Fetch champion data and build grid
  fetch(`https://ddragon.leagueoflegends.com/cdn/${patch}/data/en_US/champion.json`)
    .then(res => res.json())
    .then(data => {
      const champions = Object.values(data.data);

      champions.forEach(champion => {
        const img = document.createElement("img");
        img.src = `https://ddragon.leagueoflegends.com/cdn/${patch}/img/champion/${champion.image.full}`;
        img.alt = champion.name;
        img.title = champion.name;
        img.classList.add("champion");

        if (selectedChamps.includes(champion.id)) {
          img.classList.add("selected");
        }

        img.addEventListener("click", () => {
          if (img.classList.contains("selected")) {
            img.classList.remove("selected");
            selectedChamps = selectedChamps.filter(id => id !== champion.id);
          } else {
            img.classList.add("selected");
            selectedChamps.push(champion.id);
          }
          localStorage.setItem("selectedChamps", JSON.stringify(selectedChamps));
        });

        championGrid.appendChild(img);
        championElements.push({ id: champion.id, element: img });
      });

      // Select All button event
      selectAllBtn.addEventListener("click", () => {
        championElements.forEach(champ => {
          if (champ.element.style.display !== "none" && !champ.element.classList.contains("selected")) {
            champ.element.classList.add("selected");
            if (!selectedChamps.includes(champ.id)) {
              selectedChamps.push(champ.id);
            }
          }
        });
        localStorage.setItem("selectedChamps", JSON.stringify(selectedChamps));
      });

      // Deselect All button event
      deselectAllBtn.addEventListener("click", () => {
        championElements.forEach(champ => {
          if (champ.element.style.display !== "none" && champ.element.classList.contains("selected")) {
            champ.element.classList.remove("selected");
            selectedChamps = selectedChamps.filter(id => id !== champ.id);
          }
        });
        localStorage.setItem("selectedChamps", JSON.stringify(selectedChamps));
      });
    });

  // Search filtering
  searchInput.addEventListener("input", () => {
    const searchTerm = searchInput.value.toLowerCase();
    championElements.forEach(champ => {
      const name = champ.element.alt.toLowerCase();
      champ.element.style.display = name.includes(searchTerm) ? "" : "none";
    });
  });

  // Random champion pick from selected
  randomBtn.addEventListener("click", () => {
    if (selectedChamps.length === 0) {
      randomText.textContent = "No champions selected!";
      randomImage.style.display = "none";
      return;
    }
    const randId = selectedChamps[Math.floor(Math.random() * selectedChamps.length)];
    const champ = championElements.find(c => c.id === randId);
    if (champ) {
      randomText.textContent = `Random Champion: ${champ.element.alt}`;
      randomImage.src = champ.element.src;
      randomImage.alt = champ.element.alt;
      randomImage.style.display = "block";
    }
  });
</script>

</body>
</html>
